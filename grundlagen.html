<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Lineare Regression</title>
  <meta name="description" content="Dieses Book hat zum Ziel moderne Ansätze der Statistik einfach aber detailiert zu erklären. Neben den theoretischen Konzepten werden verschiedene Darstellungsformate und Modelimplication besprochen.">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="Lineare Regression" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Dieses Book hat zum Ziel moderne Ansätze der Statistik einfach aber detailiert zu erklären. Neben den theoretischen Konzepten werden verschiedene Darstellungsformate und Modelimplication besprochen." />
  <meta name="github-repo" content="systats/linear_regression" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lineare Regression" />
  
  <meta name="twitter:description" content="Dieses Book hat zum Ziel moderne Ansätze der Statistik einfach aber detailiert zu erklären. Neben den theoretischen Konzepten werden verschiedene Darstellungsformate und Modelimplication besprochen." />
  

<meta name="author" content="Simon Roth">


<meta name="date" content="2017-11-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="basics.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="part"><span><b>I Start</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Einstieg</a></li>
<li class="chapter" data-level="2" data-path="grundlagen.html"><a href="grundlagen.html"><i class="fa fa-check"></i><b>2</b> Grundlagen</a><ul>
<li class="chapter" data-level="2.1" data-path="grundlagen.html"><a href="grundlagen.html#messnivaus"><i class="fa fa-check"></i><b>2.1</b> Messnivaus</a></li>
<li class="chapter" data-level="2.2" data-path="grundlagen.html"><a href="grundlagen.html#lageparameter"><i class="fa fa-check"></i><b>2.2</b> Lageparameter</a><ul>
<li class="chapter" data-level="2.2.1" data-path="grundlagen.html"><a href="grundlagen.html#modus"><i class="fa fa-check"></i><b>2.2.1</b> Modus</a></li>
<li class="chapter" data-level="2.2.2" data-path="grundlagen.html"><a href="grundlagen.html#median"><i class="fa fa-check"></i><b>2.2.2</b> Median</a></li>
<li class="chapter" data-level="2.2.3" data-path="grundlagen.html"><a href="grundlagen.html#mean"><i class="fa fa-check"></i><b>2.2.3</b> Mean</a></li>
<li class="chapter" data-level="2.2.4" data-path="grundlagen.html"><a href="grundlagen.html#mode-median-mean-im-vergleich"><i class="fa fa-check"></i><b>2.2.4</b> Mode, Median &amp; Mean im Vergleich</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="grundlagen.html"><a href="grundlagen.html#streuungsparameter"><i class="fa fa-check"></i><b>2.3</b> Streuungsparameter</a><ul>
<li class="chapter" data-level="2.3.1" data-path="grundlagen.html"><a href="grundlagen.html#varianz"><i class="fa fa-check"></i><b>2.3.1</b> Varianz</a></li>
<li class="chapter" data-level="2.3.2" data-path="grundlagen.html"><a href="grundlagen.html#standardabweichung"><i class="fa fa-check"></i><b>2.3.2</b> Standardabweichung</a></li>
<li class="chapter" data-level="2.3.3" data-path="grundlagen.html"><a href="grundlagen.html#geometrie"><i class="fa fa-check"></i><b>2.3.3</b> Geometrie</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="grundlagen.html"><a href="grundlagen.html#kovarianz"><i class="fa fa-check"></i><b>2.4</b> Kovarianz</a></li>
<li class="chapter" data-level="2.5" data-path="grundlagen.html"><a href="grundlagen.html#korrelation"><i class="fa fa-check"></i><b>2.5</b> Korrelation</a></li>
</ul></li>
<li class="part"><span><b>II Lieneare Regression</b></span></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> Basics</a></li>
<li class="chapter" data-level="4" data-path="lm-modellauswahl.html"><a href="lm-modellauswahl.html"><i class="fa fa-check"></i><b>4</b> LM Modellauswahl</a></li>
<li class="chapter" data-level="5" data-path="reporting.html"><a href="reporting.html"><i class="fa fa-check"></i><b>5</b> Reporting</a></li>
<li class="chapter" data-level="6" data-path="modelldiagnose.html"><a href="modelldiagnose.html"><i class="fa fa-check"></i><b>6</b> Modelldiagnose</a></li>
<li class="chapter" data-level="7" data-path="non-linearitat.html"><a href="non-linearitat.html"><i class="fa fa-check"></i><b>7</b> Non-Linearität</a></li>
<li class="chapter" data-level="8" data-path="dimesnionality-reduction.html"><a href="dimesnionality-reduction.html"><i class="fa fa-check"></i><b>8</b> Dimesnionality Reduction</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lineare Regression</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="grundlagen" class="section level1">
<h1><span class="header-section-number">2</span> Grundlagen</h1>
<p>Bevor man komplexere Methoden verstehen möchte, müssen die Basics sitzen! Komplexe Statistik ist die Summe aus vielen kleinen Konzepten.</p>
<div id="messnivaus" class="section level2">
<h2><span class="header-section-number">2.1</span> Messnivaus</h2>
<p>Aus Methodenlehre oder Fragebogenkonstruktion kennen wir vier Messniveaus:</p>
<ul>
<li><strong>N</strong>ominal: ungeordnete Gruppenzugehörigkeit/ Kategorien</li>
<li><strong>O</strong>rdinal: geordnete Gruppenzugehörigkeit/ geordnete Gruppen</li>
<li><strong>I</strong>nterval: metrisch skaliert mit <span class="math inline">\(\geq\)</span> 5 Kategorien <span class="math inline">\(\approx\)</span> Semi-Äquidistanz der Ausprägungen (Ein Anstieg um eine Einheit sollte von Gruppe zu Gruppe das “Gleiche” bedeuten).</li>
<li><strong>R</strong>atio: metrisch skaliert mit einem natürlichen Null-Punkt.</li>
</ul>
<p>Diese Messniveaus werden auch Skalierung genannt. In der Praxis sind lediglich zwei Skalen von Bedeutung: Nominal und Metrisch. Ordinale Variablen müssen für eine Regression genauso wie nominale Variablen in Dummies transformiert werden. Ein Dummy kann nur zwei Ausprägungen [0, 1] annehmen. Damit verliert man die Ordnungsstruktur von Ordinalen Variabel (ausführlich dazu in Kapitel <a href="#daten-transformationen"><strong>??</strong></a>).</p>
<blockquote>
<p><strong>Tipp:</strong> Wenn eine Grafik nicht funktioniert ist des Öfteren die Skalierung falsch.</p>
</blockquote>
<p>In <code>R</code> sind drei Hauptdatentypen implementiert:</p>
<ul>
<li><strong>Factor</strong> <fctr>: Unveränderliche Ausprägungen (z.B. Gender, Religion).</li>
<li><strong>Character</strong> <chr>: aka “String” oder ‘String’, veränderbarer Text.</li>
<li><strong>Numeric</strong> <int, dbl>: Jeglicher Zahlenreihen (Vektoren) mit dem man rechnen kann.</li>
</ul>
<p>Des Weiteren existieren ebenfalls wichtige Datentypen, die für eine ausgewachsene Programmiersprache üblich sind.</p>
<ul>
<li><strong>Boolean</strong> &lt;&gt;: [TRUE | FALSE], [T | F]</li>
<li><strong>NA</strong>: Missing Values</li>
<li><strong>NaN</strong> &lt;&gt;: 0/0 <span class="math inline">\(\rightarrow\)</span> ‘Not a Number’</li>
<li><strong>Infinity</strong> &lt;+/- Inf&gt;: 1/0</li>
</ul>
<p>Transformation zwischen den Datentypen. Aber welcher Datentyp liegt hier for?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(dat<span class="op">$</span>variable)
<span class="kw">str</span>(dat)

<span class="kw">library</span>(dplyr)
<span class="kw">glimpse</span>(dat)</code></pre></div>
<p>Es existiert eine “Hierarchie” innerhalb der Datentypen:</p>
<p>Factor <span class="math inline">\(\rightarrow\)</span> Character <span class="math inline">\(\rightarrow\)</span> Numeric</p>
<p>mit <code>base</code> lassen sich diese Typen einfach transformieren (casten):</p>
<ul>
<li><code>as.factor()</code></li>
<li><code>as.character()</code></li>
<li><code>as.numeric()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">num &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
char &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hans&quot;</span>, <span class="st">&quot;Micha&quot;</span>, <span class="st">&quot;Torsten&quot;</span>)
fac &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Hans&quot;</span>, <span class="st">&quot;Micha&quot;</span>, <span class="st">&quot;Torsten&quot;</span>))

<span class="kw">library</span>(dplyr)
<span class="kw">glimpse</span>(num)</code></pre></div>
<pre><code>##  num [1:3] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(char)</code></pre></div>
<pre><code>##  chr [1:3] &quot;Hans&quot; &quot;Micha&quot; &quot;Torsten&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(fac)</code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;Hans&quot;,&quot;Micha&quot;,..: 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">num1 &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(fac))
num2 &lt;-<span class="st"> </span>fac <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as.character</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as.numeric</span>()

<span class="kw">class</span>(num1)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(num2)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>Als nächstes werden die Grundlagen der Statistik besprochen auf denen alle weiteren Verfahren basieren. Es folgen univariate Lage und Streuungparameter sowie bivariate Korrelationsmaße.</p>
</div>
<div id="lageparameter" class="section level2">
<h2><span class="header-section-number">2.2</span> Lageparameter</h2>
<p>Um ganze Verteilungen (hunderter Beobachtungen) anhand eines Parameters zu beschreiben werden die <strong>Maße der zentralen Tendenz</strong> eingesetzt. Diese werden auch als Lageparameter oder deskriptive Verteilungsmomente bezeichnet.</p>
<p>Nehmen wir eine Variable metrischen Messniveaus mit folgenden Ausprägung an:</p>
<p><span class="math display">\[x = [0, 2, 4, 3, 1, 2] \]</span></p>
<div id="modus" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Modus</h3>
<p>Die Merkmalsausprägung, welche in einer Stichprobe x am häufigsten vorkommt heißt Modus. Damit ist ein Modus genau der Gipfel einer Häufigkeitsverteilung und wird mit dem Buchstaben D oder seltener <span class="math inline">\(\bar x_M\)</span> definiert. Häufigkeitsverteilungen mit zwei oder mehr Modi werden als Multimodale Verteilungen bezeichnet.</p>
<p>Im obigen Beispiel liegt eine unimodale Verteilung mit dem Modus 2 vor, wobei der Modus keine arithmetischen Rechenoperationen zulässt und damit an Bedeutsamkeit einbüßt. Außerdem kann ein Modus in vielen Fällen entweder schwer identifiziert werden oder gar keine inhaltliche Aussage zulassen.</p>
<p><strong>Links</strong> <a href="https://de.wikipedia.org/wiki/Modus_(Statistik)">Modus Wikipedia</a></p>
</div>
<div id="median" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Median</h3>
<p>Der Median <span class="math inline">\(\tilde x\)</span> (gesprochen Tilde-x oder “Schlange-x”) einer Variablen ist der Wert, der an mittlerer (zentraler) Stelle steht, wenn man die Werte der Größe nach sortiert.</p>
<p><strong>Regeln</strong></p>
<ul>
<li>Wenn die Anzahl der Werte ungerade ist, ist die mittlere Zahl der Median.</li>
<li>Wenn die Anzahl der Werte gerade ist, wird der Median meist als arithmetisches Mittel der beiden mittleren Zahlen definiert.</li>
</ul>
<p><span class="math display">\[x_{\;\;\;\;} = [0, 2, 4, 3, 1, 2] \]</span></p>
<div align="center">
<p><span class="math inline">\(x_{\text{sort}} = [0,1,\)</span> <font color="red"> <span class="math inline">\(2,2\)</span> </font> <span class="math inline">\(,3,4]\)</span></p>
</div>
<p><span class="math display">\[\tilde x = 2 \]</span> <br></p>
<p><strong>R-Code</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>)
<span class="kw">median</span>(x, <span class="dt">na.rm =</span> T)</code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Der Median gehört zur <strong>Gruppe der Quantile</strong> und kann auch als <span class="math inline">\(\frac{1}{2}\)</span>-Quantil betrachtet werden. Quantile sind Schwellenwerte einer Verteilung, die eine Variable in Anteile zerlegt. Das 25-%-Quantil beispielsweise ist der Schwellenwert, für den gilt, dass 25 % aller Werte kleiner sind als dieser Wert. Genauer gesagt unterteilen Quantile eine Verteilung in prozentuale Intervalle.</p>
<ul>
<li><strong>Median</strong>: (Hälfte) entspricht dem Quantil <span class="math inline">\(Q_{0,5}\)</span> (0,5-Quantil) bzw. dem 2. Quartil Q2 oder dem 50. Perzentil P50.</li>
<li><strong>Quartile</strong>: (Viertel) sind die Quantile <span class="math inline">\(Q_{0,25}\)</span> (0,25-Quantil), <span class="math inline">\(Q_{0,50}\)</span> (0,5-Quantil = Median) und <span class="math inline">\(Q_{0, 75}\)</span> (0,75-Quantil), die auch als Q1 („unteres Quartil“), Q2 („mittleres Quartil“) und Q3 („oberes Quartil“) bezeichnet werden. Sie sind die in der Statistik mit am häufigsten verwendete Form der Quantile.</li>
<li><strong>Dezile</strong>: (Zehntel) zerlegen eine Variable in 10 gleich große Teile. Das Quantil <span class="math inline">\(Q_{0,3}\)</span> (also das 0,3-Quantil) ist der Wert des Punktes einer Verteilung, unterhalb dessen sich 30 % aller Fälle der Verteilung befinden.</li>
<li><strong>Perzentile</strong>: (Prozent) unterteilt eine Variable in 1% Segmente.</li>
</ul>
<p><strong>R-Code</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### default sind Quartile
<span class="kw">quantile</span>(x, <span class="dt">na.rm =</span> T)</code></pre></div>
<pre><code>##   0%  25%  50%  75% 100% 
## 0.00 1.25 2.00 2.75 4.00</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### Median und 2. Quartil sind identisch
<span class="kw">median</span>(x)</code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">quantile</span>(x, <span class="dt">prob =</span> <span class="fl">0.5</span>)</code></pre></div>
<pre><code>## 50% 
##   2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### Dezile
<span class="kw">quantile</span>(x, <span class="dt">prob =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>))</code></pre></div>
<pre><code>##   0%  10%  20%  30%  40%  50%  60%  70%  80%  90% 100% 
##  0.0  0.5  1.0  1.5  2.0  2.0  2.0  2.5  3.0  3.5  4.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### Percentile
<span class="kw">library</span>(dplyr) <span class="co"># für doe pip %&gt;%</span>
<span class="kw">quantile</span>(x, <span class="dt">prob =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.01</span>), <span class="dt">type =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## 0% 1% 2% 3% 4% 5% 
##  0  0  0  0  0  0</code></pre>
<p>Quartile werden meist mit einem <strong>Boxplot</strong> dargestellt. Dabei vereint ein Boxplot verschiedene robuste Streuungs- und Lagemaße in einer Darstellung, wodurch man schnell einen Eindruck über die Verteilung und Streuung einer Variablen bekommt.</p>
<p><img src="linear_model_files/figure-html/boxplot-1.png" width="576" style="display: block; margin: auto;" /></p>
<p><strong>Links</strong></p>
<p><a href="https://de.wikipedia.org/wiki/Median">Median Wikipedia</a></p>
</div>
<div id="mean" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Mean</h3>
<p>Wie lässt sich diese Variable am besten Beschreiben? Bzw. Was ist die beste Vorhersage von <span class="math inline">\(x\)</span>? Das arithmetisches Mittel <span class="math inline">\(\bar x\)</span> (mean)! Dieser beschreibt das gewichtete Mittel von <span class="math inline">\(x\)</span> (physikalischer Schwerpunkt einer Verteilung) und wird gebildet durch:</p>
<p><span class="math display">\[\bar x = \frac{1}{N} \sum x = \frac{1}{6}*(0+2+4+3+1+2) = 2\]</span></p>
<p>Erst werden alle Ausprägungen der Variable/ Vektor aufsummiert und durch die Anzahl der Fälle <span class="math inline">\(N\)</span> geteilt. Der R-Code dazu:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>)
<span class="kw">mean</span>(x, <span class="dt">na.rm =</span> T)</code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Diese Methode ist anfällig für Ausreißer, die das gewichtete Mittel unproportional verändern. Ausgehend vom Mean sind auch alle anderen Maße, basierend auf dem Mean wie z.B. die lineare Regression anfällig für Ausreißer.</p>
</div>
<div id="mode-median-mean-im-vergleich" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Mode, Median &amp; Mean im Vergleich</h3>
<p>Im Vergleich mit Median und arithmetischem Mittel charakterisiert der Modus die Neigung einer Verteilung – ähnlich der statistischen Schiefe. (<a href="https://de.wikipedia.org/wiki/W%C3%B6lbung_(Statistik)">Kurtosis</a> nicht behandelt). Das diese Erkenntnis eher nachgeordnet ist zeigen die heutigen Verfahren die sich fast auschließlich auf den Mean (oder eine modifizierte Form) stützen. Der Median kommt zwar in Ausreißer-robusten Methoden zum Einsatz. Diese Methode wird Quantile Regression genannt:</p>
<ul>
<li><a href="https://rpubs.com/ibn_abdullah/rquantile">rquantile Rpub</a></li>
<li><a href="https://rpubs.com/Joaquin_AR/291106">good spanish version</a></li>
<li><a href="https://rpubs.com/ledongnhatnam/275422">h2o GBM based quantile regression</a></li>
</ul>
<p>An zufällige Zahlen bekommt man in R schnell ran:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))
<span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>)) <span class="co"># Normalverteilung</span>
<span class="kw">hist</span>(<span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>)) <span class="co"># Gleichverteilung</span>
<span class="kw">hist</span>(<span class="kw">rbinom</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">prob =</span> <span class="kw">c</span>(.<span class="dv">3</span>,.<span class="dv">2</span>))) <span class="co"># Binominalverteilung</span></code></pre></div>
<p><img src="linear_model_files/figure-html/rnorm-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Die nachfolgende Grafik soll die Unterschiede der Lagemaße aufzeigen. Dazu wurden drei verschiedene, zufällige Verteilungen simuliert.</p>
<p><img src="linear_model_files/figure-html/skew1-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Modus, Median und Mean stehen in Abhängigkeit der Schiefe in folgender Beziehung:</p>
<p>
<font face="verdana" color="blue">(links)</font> linkssteile (rechtsschiefe) Häufigkeitsverteilung: Modus &lt; Median &lt; arithmetisches Mittel <br> <font face="verdana" color="green">(mitte)</font> unimodale Normalverteilung: Modus <span class="math inline">\(\approx\)</span> Median <span class="math inline">\(\approx\)</span> arithmetisches Mittel <br> <font face="verdana" color="yellow">(rechts)</font> linksschiefe (rechtssteile) Häufigkeitsverteilung: Modus &gt; Median &gt; arithmetisches Mittel
</p>
<p>Die folgende Grafik zeigt den Sampling Process, der zu den obigen Verteilungen geführt hat. Jede Verteilung besteht aus 500 Observationen/ Werten, die zufällig von einer bekannten Verteilung gezogen worden sind …</p>
<p><img src="linear_model_files/figure-html/skew2-1.png" width="768" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="streuungsparameter" class="section level2">
<h2><span class="header-section-number">2.3</span> Streuungsparameter</h2>
<p>Bisher wurde besprochen wie das arithmetische Mittel/ Mean einer metrischen Variable gebildet wird. Allerdings reicht diese Information nicht aus um eine ganze Verteilung zu beschreiben. Dazu gibt es so genannte Streuungsmaße, welche Auskunft darüber geben wie Stark die Ausprägungen um den Mittelwert variieren. Die wichtigsten Konzepte zur Streuung sind die <strong>Varianz</strong> und <strong>Standardabweichung</strong>, welche in unterschiedlichen Kontexten eingesetzt werden z.B. als univariates Maß aber auch als Instrument um die Fehlerstreuung um eine Regressionsgerade zu beschreiben (Standardschätzfehler SE).</p>
<div id="varianz" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Varianz</h3>
<p>Das Ziel ist mittels eines Parameters, die Streuung von jeder Beobachtung zum eigenen Mittelwert zusammen zufassen. Dazu wird von jeder Beobachtung <span class="math inline">\(x_i\)</span> der Mean <span class="math inline">\(\bar x\)</span> abgezogen und quadriert. Geometrisch betrachtet liegen nun viele Abweichungsflächen vor, deren Flächeninhalte vorteilhafter Weise keine negativen Vorzeichen zulassen. Dies ist besonders wichtig, da nun die individuellen Abweichungsflächen aufsummiert werden (<span class="math inline">\(\sum\)</span>). Dadurch erhält man die gesamte Abweichungsfläche einer Variablen von ihrem Mittelwert, welche <strong>Variation</strong> genannt wird. Da diese Maßzahl in Abhängigkeit zur Fallzahl steigt, wird die Variation durch N geteilt und man erhält die <strong>Varianz</strong> (Variance).</p>
<blockquote>
<p>Die Varainz definiert die durchschnittliche Abweichung aller Beobachtungen <span class="math inline">\(x_i\)</span> vom Mittelwert <span class="math inline">\(\bar x\)</span>.</p>
</blockquote>
<p><span class="math display">\[s^2 = \frac{1}{N} \sum^N_{i=1} (x_i-\bar x)^2\]</span></p>
<p>Auch bei der Varianz existieren wieder unterschiedliche Notationen wie <span class="math inline">\(Var(x)\)</span>, <span class="math inline">\(\sigma^2\)</span> oder <span class="math inline">\(s^2\)</span>. Schreibt man die Formel komplett aus, wird die Ähnlichkeit zur Kovarianz (Covariance) deutlich, allerdings mit der gleichen Variable.</p>
<p><span class="math display">\[
s^2 = \frac{1}{N} \sum^N_{i=1} (x_i-\bar x)(x_i-\bar x) = Cov(x,x)
\]</span></p>
</div>
<div id="standardabweichung" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Standardabweichung</h3>
<p>Die Standardabweichung beruht auf der Varianz, wobei die Quadrat Wurzel gezogen wird um von der durchschnittlichen Abweichungsfläche zur durchschnittlichen Abweichungsdistanz zu gelangen.</p>
<p><span class="math display">\[s_x = \sqrt{\frac{1}{N} \sum^N_{i=1} (x_i-\bar x)^2}\]</span></p>
</div>
<div id="geometrie" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Geometrie</h3>
<p>Gegeben sei eine Variable x mit den folgenden Ausprägungen</p>
<p><span class="math display">\[
x = [1.7, 3.2, 4.9, 7.5, 1.4, 7.9, 7.7, 4.9, 3.9, 1.0]
\]</span></p>
<p>Dementsprechend lautet der Laufindex i gleich</p>
<p><span class="math display">\[
i = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
\]</span></p>
<p>Die nachfolgende Grafik zeigt (links) auf der X-Achse den Laufindex i und auf der Y-Achse die Ausprägungen der x Variable (schwarze Punkte). Der Mean <span class="math inline">\(\bar x\)</span> ist als schwarze, gestrichelte Line eingezeichnet. Jede Beobachtung <span class="math inline">\(x_i\)</span> hat eine unterschiedlich Große Abweichung (rote vertikale Linien) vom Mittelwert <span class="math inline">\(\bar x\)</span>. Alle Abweichungen unterhalb des Means würden ohne Quadrieren ein negatives Vorzeichen aufweisen. Der rechte Teil der Grafik zeigt die Summe der Abweichungen. Am größten ist die Variation, also die absolute Abweichungsfläche vom Mittelwert. Als nächstes folgt die Varianz, als durchschnittliche Abweichungsfläche und zu letzt die Standardabweichung, welche die durchschnittlich, absolute Distanz ausgibt.</p>
<p><img src="linear_model_files/figure-html/var1-1.png" width="1152" style="display: block; margin: auto;" /></p>
<p>Die bisher vorgestellten Konzepte (und die folgenden) sind verallgemeinerbar. Z.B. wird das Konzept der Standardabweichung genutzt um die Streuung um eine Regressionsgerade zu beschreiben. Dann spricht man vom Standardfehler (Standard Error) einer Schätzung (<span class="math inline">\(\beta\)</span>). In diesem Fall soll untersucht werden, wie weit weichen die Beobachtungen <span class="math inline">\(y_i\)</span> von einer linearen Schätzgerade ab? Dazu ersetzt man den Mittelwert durch die Schätzung <span class="math inline">\(\hat y\)</span> und erhält</p>
<p><span class="math display">\[
SE_\beta = \sqrt{\frac{1}{N}\sum^N_{i = 1} (y_i - \hat y)}
\]</span></p>
<p>Je besser die Schätzung <span class="math inline">\(\hat y\)</span>, desto kleiner wird der Standardfehler. Die Abweichungen von der Regressionsgerade können wie folgt visualisiert werden</p>
<p><img src="linear_model_files/figure-html/var2-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="kovarianz" class="section level2">
<h2><span class="header-section-number">2.4</span> Kovarianz</h2>
<p>Nehmen wir zwei Variablen x und y mit der folgenden Gestalt an</p>
<p><span class="math display">\[
x = [x_1, x_2, ..., x_{n-1}, x_{n}]
\]</span> und</p>
<p><span class="math display">\[
y = [y_1, y_2, ..., y_{n-1}, y_{n}]
\]</span></p>
<p>Als nächstes bilden wir die Varianzen für jede Variable separat. Dann erhalten wir</p>
<div align="center">
<p><font color="red"> <span class="math inline">\(s_x^2 = \frac{1}{N} \sum^N_{i=1} (x_i-\bar x)^2\)</span> </font> und <font color="blue"> <span class="math inline">\(s_y^2 = \frac{1}{N} \sum^N_{i=1} (y_i-\bar y)^2\)</span> </font></p>
</div>
<p>Wird nun die Kovarianz zwischen x und y berechnet, wird das Varianz Konzept generalisiert. Die Kovarianz beschreibt wie stark y in (linearer) Abhängigkeit zu x steigt oder fällt.</p>
<div align="center">
<p><span class="math inline">\(Cov(x,y) = \frac{1}{N} \sum^N_{i=1}\)</span> <font color="red"> <span class="math inline">\((x_i-\bar x)\)</span> </font> <font color="blue"> <span class="math inline">\((y_i-\bar y)\)</span> </font></p>
</div>
<p>Zur weiteren Erläuterung nehmen wir an, dass die zwei Variablen x und y in einer Matrix <span class="math inline">\(A\)</span> gebunden sind</p>
<p><span class="math display">\[
A = 
\begin{bmatrix} 
x_1 &amp; y_1\\
x_2 &amp; y_2\\
\vdots &amp; \vdots\\
x_{n-1} &amp; y_{n-1}\\
x_{n} &amp; y_{n} 
\end{bmatrix} 
\]</span></p>
<p>Die daraus resultierende Varianz-Kovarianzmatrix (VCV) hat die Dimensionen <span class="math inline">\([2\times 2]\)</span>, da die Ausgangsmatrix <span class="math inline">\(A\)</span> zwei Spalten besitzt.</p>
<div align="center">
<p><span class="math inline">\(Cov(A) = \left[ \begin{array}{c} \\ \\ \end{array} \right.\)</span></p>
<p><span class="math inline">\(\left. \begin{array}{c} \\ \\ \end{array} \right]\)</span></p>
</div>
<p><font color="red"> <span class="math inline">\(\frac{1}{N} \sum^N_{i=1} (x_i-\bar x)^2\)</span> </font></p>
<p><span class="math inline">\(\frac{1}{N} \sum^N_{i=1}\)</span> <font color="red"> <span class="math inline">\((x_i-\bar x)\)</span> </font> <font color="blue"> <span class="math inline">\((y_i-\bar y)\)</span> </font></p>
<p><span class="math inline">\(\frac{1}{N} \sum^N_{i=1}\)</span> <font color="red"> <span class="math inline">\((x_i-\bar x)\)</span> </font> <font color="blue"> <span class="math inline">\((y_i-\bar y)\)</span> </font></p>
<p><font color="blue"> <span class="math inline">\(\frac{1}{N} \sum^N_{i=1} (y_i-\bar y)^2\)</span> </font></p>
<p>Das entspricht</p>
<p><span class="math display">\[
Cov(A) = 
\begin{bmatrix} 
Var(x) &amp; Cov(y,x)\\
Cov(x,y) &amp; Var(y)
\end{bmatrix} 
\]</span></p>
<p>Zur Bildung der Kovarianz werden die absoluten Mittelwertabweichung multipliziert, aufsummiert und durch die verwendete Fallzahl (N) dividiert:</p>
<p><span class="math display">\[cov(x,y)=\frac{\sum(x_i-\bar x)(y_i -\bar y)}{n}\]</span></p>
<p><span class="math display">\[cov(X, Y) = \frac{1}{{N}} \sum\limits_{i}^{N}{(X_i – \mu_x)(Y_i – \mu_y)}\]</span></p>
<p><span class="math inline">\(E[X] = mean(x)\)</span>. The expected value notation below describes the population covariance of two variables (not sample covariance):</p>
<p><span class="math display">\[cov(x, y) = E[(x_i-E[x])(y_i-E[y])]\]</span></p>
<p>The above formula is just the population covariance written differently. For example, E[X] is the same as μx. And the E[] acts the same as taking the average of (X-E[X])(Y-E[Y]). After some algebraic transformations you can arrive at the less intuitive, but still useful formula for covariance:</p>
<p><span class="math display">\[ cov(x, y) = E[xy] – E[X]E[Y]\]</span></p>
<p>This formula can be interpreted as the product of the means of variables X and Y subtracted from the average of signed areas of variables X and Y. This probably isn’t very useful if you are trying to interpret covariance. But you’ll see it from time to time. And it works! Try it in R and compare it to the population covariance from above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(x<span class="op">*</span>y) <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)<span class="op">*</span><span class="kw">mean</span>(y) <span class="co"># expected value notation</span></code></pre></div>
<pre><code>## [1] 2.810155</code></pre>
<p><img src="linear_model_files/figure-html/viscov-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="korrelation" class="section level2">
<h2><span class="header-section-number">2.5</span> Korrelation</h2>
<p>Das Pearsons <span class="math inline">\(r_{xy}\)</span> oder bivariate Korrelation beschreibt den Zusammenhang zwischen zwei variablen <span class="math inline">\(x\)</span> und <span class="math inline">\(y\)</span> metrischen Messniveaus. Der Korrelationskoeffizient wird meistens zur explorativen Datenuntersuchung verwendet, um schnell die Beziehung zweier Variablen zu ermitteln (ohne Signifikanztests sind keine inferenziellen Schlüsse möglich). Das hat zum berühmten Satz geführt</p>
<blockquote>
<p>Correlation does not always imply causation! In a more general way: Association does not imply causation. And turn, no correlation does not mean no non-linear assoziation.</p>
</blockquote>
<p>Man bedenke die Scheinkorrelationen zwischen Schockoladenkonsum und militärischer Aufrüstung (pro Land). Korreliert stark hat jedoch sachlogisch nichts miteinander zu tun.</p>
<p>Zur Berechnung von Pearson‘s r wird die Kovarianz durch die Standardabweichung von x und y dividiert. Die Notation ist entweder <span class="math inline">\(cor(x,y)\)</span> oder <span class="math inline">\(r_{xy}\)</span>.</p>
<p><span class="math display">\[r_{xy}=\frac{cov(x,y)}{s_x s_y}\]</span></p>
<p>Der Koeffizient kann Werte zwischen <span class="math inline">\(\pm 1\)</span> annehmen. In selten Ausnahmefällen auch großer, wenn <span class="math inline">\(s_y &gt; 2 s_x\)</span> gegeben ist. Als Resultat können nun die Beziehungen zwischen Variablen mit unterschiedlich großen Skalen direkt miteinander verglichen werden. Der Vergleich von Korrelationskoeffizienten zweier Populationen ist nur möglich, wenn sich die Standardabweichungen nicht stark unterscheiden.</p>
<p>Des Weiteren liegt Pearson’s r (wie allen anderen Modellen aus <code>LM</code> und <code>GLM</code>) eine Linearitätsannahme zugrunde. Das bedeutet lediglich lineare Beziehungen können geschätzt werden. Zwar können die Variablen transformiert werden (z.B. quadrieren), doch beschreibt der Korrelationskoeffizient immer eine lineare Steigung. In manchen Situation passen die Daten jedoch nicht zum statistischen Modell (oder umgekehrt) wodurch eine valide Aussage unmöglich wird.</p>
<p>Anscombe’s Quartet beschreibt drei dieser invaliden Datenverteilungen, wo der Einsatz einer Pearson Korrelation oder jeglichen anderen Modellierung inadäquat wäre, jedoch zum identischen Korrelationskoeffizienten (<span class="math inline">\(r_{xy} = 0.8164\)</span>) führen<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. Die genannten Probleme unterstreichen die Wichtigkeit von Datenvisualisierungen und würden in Plot C und D zum Ausschluss von Ausreißern und in Plot zu einer nicht-linearen Transformation der x Variablen führen.</p>
<p><img src="linear_model_files/figure-html/ascomb-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Some other ideas on <a href="https://rstudio-pubs-static.s3.amazonaws.com/52381_36ec82827e4b476fb968d9143aec7c4f.html">Anscombe’s Quartet</a></p>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Francis J. Anscombe 1973: Graphs in Statistical Analysis<a href="grundlagen.html#fnref1">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
